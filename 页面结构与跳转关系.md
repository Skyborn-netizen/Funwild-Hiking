# 轻野徒步社 - 页面结构与跳转关系

## 页面ID映射

| 页面名称 | 页面ID | 描述 |
|----------|--------|------|
| 登录页 | `login-page` | 应用启动页面，用户认证入口 |
| 社团主页 | `community-page` | 首页，展示活动和成员 |
| 活动详情页 | `activity-detail-page` | 活动详细信息页面 |
| 个人中心页 | `profile-page` | 用户个人信息和设置 |

---

## 页面结构与按钮ID

### 1. 登录页 (`login-page`)

#### 页面按钮
| 按钮ID | 按钮文本 | 功能 |
|--------|----------|------|
| 无特定ID | 微信一键登录 | 触发 `loginWithWeChat()` 函数 |
| 无特定ID | 手机号登录 | 触发 `showPhoneLogin()` 函数 |

#### 页面跳转
- **微信登录** → `community-page`
- **手机号登录** → `community-page`

---

### 2. 社团主页 (`community-page`)

#### 页面结构ID
| 元素ID | 描述 | 内容 |
|--------|------|------|
| `activities-tab` | 活动Tab内容区 | 活动列表容器 |
| `members-tab` | 成员Tab内容区 | 成员列表容器 |
| `activity-list` | 活动列表容器 | 动态加载活动卡片 |
| `member-list` | 成员列表容器 | 动态加载成员卡片 |
| `publish-btn` | 发布活动按钮 | 仅管理员/领队可见 |

#### Tab导航按钮
| 按钮 | 点击事件 | 功能 |
|------|----------|------|
| 活动 | `switchTab('activities')` | 切换到活动列表 |
| 成员 | `switchTab('members')` | 切换到成员列表 |

#### 页面跳转
- **发布活动按钮** → 触发 `showFeedback()` (反馈功能)

---

### 3. 活动详情页 (`activity-detail-page`)

#### 页面结构ID
| 元素ID | 描述 | 内容 |
|--------|------|------|
| `activity-detail-content` | 活动详情内容容器 | 动态加载活动信息 |
| `join-btn` | 报名按钮 | 根据活动状态显示不同文本 |

#### 按钮状态
| 按钮ID | 状态 | 按钮文本 | 触发函数 |
|--------|------|----------|----------|
| `join-btn` | available | 立即报名 | `showJoinModal(activity)` |
| `join-btn` | full | 名额已满 | 无功能 |
| `join-btn` | ended | 活动已结束 | 无功能 |

#### 页面跳转
- **报名按钮** → 打开报名确认弹窗 (`join-modal`)

---

### 4. 个人中心页 (`profile-page`)

#### 页面结构ID
| 元素ID | 描述 | 内容 |
|--------|------|------|
| `joined-activities` | 已报名活动容器 | 显示用户报名的活动 |
| `published-activities` | 已发布活动容器 | 显示用户发布的活动 |

#### 设置选项按钮
| 按钮 | 点击事件 | 功能 |
|------|----------|------|
| 意见反馈 | `showFeedback()` | 打开反馈功能 |
| 用户协议 | 无特定事件 | 预留功能 |
| 退出登录 | `logout()` | 退出并跳转登录页 |

#### 页面跳转
- **退出登录** → `login-page`

---

## 底部导航栏

### 导航按钮映射
| 按钮位置 | 点击事件 | 跳转页面 | 页面ID |
|----------|----------|----------|--------|
| 首页 | `switchPage('community')` | 社团主页 | `community-page` |
| 活动 | `switchPage('activity-detail')` | 活动详情页 | `activity-detail-page` |
| 我的 | `switchPage('profile')` | 个人中心页 | `profile-page` |

---

## 弹窗组件

### 1. 报名确认弹窗 (`join-modal`)

#### 弹窗结构ID
| 元素ID | 描述 | 内容 |
|--------|------|------|
| `join-activity-info` | 活动信息容器 | 显示报名活动详情 |

#### 弹窗按钮
| 按钮 | 触发函数 | 功能 |
|------|----------|------|
| 取消 | `closeJoinModal()` | 关闭弹窗 |
| 我已完成支付 | `confirmPayment()` | 确认支付并报名 |

### 2. 手机号登录弹窗 (`phone-login-modal`)

#### 弹窗结构ID
| 元素ID | 描述 | 内容 |
|--------|------|------|
| `phone-input` | 手机号输入框 | 用户手机号输入 |
| `code-input` | 验证码输入框 | 验证码输入 |

#### 弹窗按钮
| 按钮 | 触发函数 | 功能 |
|------|----------|------|
| 获取验证码 | 无特定事件 | 发送验证码 |
| 取消 | `closePhoneLogin()` | 关闭弹窗 |
| 登录 | `phoneLogin()` | 完成手机号登录 |

---

## 页面跳转完整映射

### 页面间跳转关系图

```
登录页 (login-page)
    ├── 微信登录 → 社团主页 (community-page)
    └── 手机号登录 → 社团主页 (community-page)

社团主页 (community-page)
    ├── 活动Tab → 显示活动列表
    ├── 成员Tab → 显示成员列表  
    ├── 活动卡片 → 活动详情页 (activity-detail-page)
    ├── 发布活动 → 反馈功能
    └── 底部导航:
        ├── 首页 → 社团主页 (community-page)
        ├── 活动 → 活动详情页 (activity-detail-page)
        └── 我的 → 个人中心页 (profile-page)

活动详情页 (activity-detail-page)
    ├── 报名按钮 → 报名弹窗 (join-modal)
    └── 底部导航:
        ├── 首页 → 社团主页 (community-page)
        ├── 活动 → 活动详情页 (activity-detail-page)
        └── 我的 → 个人中心页 (profile-page)

个人中心页 (profile-page)
    ├── 退出登录 → 登录页 (login-page)
    ├── 意见反馈 → 反馈功能
    └── 底部导航:
        ├── 首页 → 社团主页 (community-page)
        ├── 活动 → 活动详情页 (activity-detail-page)
        └── 我的 → 个人中心页 (profile-page)

报名弹窗 (join-modal)
    ├── 取消 → 关闭弹窗
    └── 确认支付 → 关闭弹窗 + 报名成功

手机号登录弹窗 (phone-login-modal)
    ├── 取消 → 关闭弹窗
    └── 登录 → 关闭弹窗 + 跳转主页
```

---

## 核心跳转函数

### `switchPage(pageName)` 函数
- **功能**: 页面间切换
- **参数**: `pageName` - 页面名称
- **跳转逻辑**:
  - `community` → `community-page`
  - `activity-detail` → `activity-detail-page`
  - `profile` → `profile-page`

### `switchTab(tabName)` 函数  
- **功能**: Tab内容切换
- **参数**: `tabName` - Tab名称
- **切换逻辑**:
  - `activities` → 显示活动列表
  - `members` → 显示成员列表

### `showActivityDetail(activityId)` 函数
- **功能**: 跳转到活动详情页
- **参数**: `activityId` - 活动ID
- **跳转**: 切换到 `activity-detail-page` 并加载活动详情

---

## 页面状态管理

### 当前活动状态
- `currentActivity` - 当前选中的活动对象
- 页面跳转时保持活动状态

### 当前用户状态  
- `currentUser` - 当前登录用户对象
- 控制页面功能权限（发布活动按钮显示）

### 底部导航状态同步
- 页面切换时同步更新导航按钮激活状态
- 保持用户界面一致性