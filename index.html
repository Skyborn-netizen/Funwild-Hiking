<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è½»é‡å¾’æ­¥ç¤¾</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'forest-green': '#2f5d3a',
                        'amber': '#ed8936'
                    }
                }
            }
        }
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: #f7f8fa;
            color: #2f5d3a;
            line-height: 1.5;
            font-size: 13px;
            font-weight: 400;
        }
        
        .app-container {
            max-width: 375px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            position: relative;
            overflow: hidden;
        }
        
        .page {
            display: none;
            padding-bottom: 60px;
            opacity: 0;
            transform: translateX(30px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        #community-page {
            min-height: auto;
        }
        
        .page.active {
            display: block;
            opacity: 1;
            transform: translateX(0);
        }
        
        #login-page {
            padding-bottom: 0;
        }
        
        #login-page.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .app-container.hide-nav .bottom-nav {
            display: none !important;
        }
        
        /* ç»¿è‰²è‰²ç³»å®šä¹‰ */
        :root {
            --green-dark: #1f4e2a;     /* æ·±ç»¿è‰² */
            --green-medium: #3a7a4a;   /* ä¸­ç»¿è‰² */
            --green-light: #4a9d5f;    /* æµ…ç»¿è‰² */
            --green-pale: #e8f5e8;     /* ææµ…ç»¿è‰² */
        }
        
        .header {
            background: var(--green-dark);
            color: white;
            padding: 16px 20px 16px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 2px;
        }
        
        .header p {
            font-size: 12px;
            opacity: 0.8;
        }
        
        .main-content {
            padding: 0;
            overflow: hidden;
        }
        
        /* å¹¿åœºã€æ´»åŠ¨è¯¦æƒ…ã€æˆ‘çš„é¡µé¢å¢åŠ 18pxå†…è¾¹è· */
        #square-page .main-content,
        #activity-detail-page .main-content,
        #profile-page .main-content {
            padding: 0 18px;
        }
        
        /* ç¤¾å›¢é¡µé¢ç‰¹æ®Šå¸ƒå±€ */
        .community-header {
            position: fixed;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 375px;
            background: white;
            z-index: 100;
            padding: 20px 20px 0 20px;
            box-sizing: border-box;
        }

        .community-header-content {
            background: var(--green-dark);
            color: white;
            padding: 16px 20px 12px;
            text-align: center;
            border-radius: 8px 8px 0 0;
        }

        .community-header-content h1 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .community-header-content p {
            font-size: 12px;
            opacity: 0.8;
        }

        .announcement {
            background: var(--green-pale);
            padding: 12px 16px;
            border-radius: 0 0 8px 8px;
        }

        .announcement-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--green-dark);
            margin-bottom: 4px;
        }

        .announcement-text {
            font-size: 11px;
            color: #4a5568;
            line-height: 1.3;
        }
        
        .activity-list-container {
            /* paddingå’Œmarginå·²ç§»é™¤ï¼Œä½¿ç”¨main-contentçš„ç»Ÿä¸€è®¾ç½® */
            /* margin-top: 16px; ç§»é™¤ä»¥ä¸å…¶ä»–é¡µé¢ä¿æŒä¸€è‡´ */
        }
        
        /* éšè—æ»šåŠ¨æ¡ä½†ä¿ç•™æ»šåŠ¨åŠŸèƒ½ */
        .scroll-container {
            -ms-overflow-style: none; /* IE å’Œ Edge */
            scrollbar-width: none; /* Firefox */
        }
        
        .scroll-container::-webkit-scrollbar {
            display: none; /* Chromeã€Safari å’Œ Opera */
        }
        
        .section {
            margin-bottom: 20px;
        }
        
        .section-title {
            font-size: 15px;
            font-weight: 600;
            color: var(--green-dark);
            margin-bottom: 12px;
            padding-top: 16px;
        }
        
        .content-block {
            background: white;
            border: none;
            margin-bottom: 8px;
        }
        
        .tab-nav {
            display: flex;
            gap: 8px;
            margin: 24px 0 20px;
            padding: 0;
            background: none;
        }
        
        /* éšè—æ»šåŠ¨æ¡ä½†ä¿ç•™æ»šåŠ¨åŠŸèƒ½ */
        .scroll-container {
            -ms-overflow-style: none; /* IE å’Œ Edge */
            scrollbar-width: none; /* Firefox */
        }
        
        .scroll-container::-webkit-scrollbar {
            display: none; /* Chromeã€Safari å’Œ Opera */
        }
        
        .section {
            margin-bottom: 20px;
        }
        
        .section-title {
            font-size: 15px;
            font-weight: 600;
            color: var(--green-dark);
            margin-bottom: 12px;
            padding-top: 16px;
        }
        
        .content-block {
            background: white;
            border: none;
            margin-bottom: 8px;
        }
        
        .tab-item {
            flex: 1;
            text-align: center;
            padding: 12px 16px;
            font-size: 14px;
            color: #718096;
            cursor: pointer;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            transition: all 0.2s;
        }
        
        .tab-item.active {
            color: white;
            background: var(--green-dark);
            border-color: var(--green-dark);
            font-weight: 600;
        }
        
        /* æ´»åŠ¨åˆ—è¡¨é¡µé¢æ ·å¼ */
        .activity-list-container {
            padding: 0 20px;
        }
        
        .activity-list-header {
            background: var(--green-dark);
            padding: 0;
            margin: 0;
        }
        
        .page-title {
            font-size: 16px;
            font-weight: 600;
            color: white;
            margin: 0;
            padding: 0 20px 6px;
            text-align: center;
        }
        
        .filter-tabs {
            display: flex;
            gap: 0;
            background: transparent;
            padding: 0 12px 8px;
            border-radius: 0;
        }
        
        .filter-tab {
            flex: 1;
            text-align: center;
            padding: 6px 10px;
            font-size: 13px;
            color: rgba(255, 255, 255, 0.8);
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s;
            background: rgba(255, 255, 255, 0.1);
            margin: 0 2px;
        }
        
        .filter-tab.active {
            color: white;
            background: rgba(255, 255, 255, 0.2);
            font-weight: 600;
        }
        
        .filter-tab.active {
            background: white;
            color: var(--green-dark);
            font-weight: 500;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .activity-cards-grid {
            display: grid;
            gap: 16px;
            margin: 6px 0 0 0; /* æ´»åŠ¨å¡ç‰‡å‘ä¸‹ç§»åŠ¨6pxï¼Œç§»é™¤æ´»åŠ¨å¡ç‰‡ä¸é¡µé¢å·¦å³è¾¹çš„è·ç¦» */
        }
        
        /* æ´»åŠ¨å¡ç‰‡æ ·å¼ */
        .activity-card {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }
        
        .activity-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-color: var(--green-light);
        }
        
        .activity-header {
            display: flex;
            justify-content: between;
            align-items: flex-start;
            margin-bottom: 8px;
        }
        
        .activity-title {
            font-size: 16px;
            font-weight: 600;
            color: #2f5d3a;
            line-height: 1.3;
            flex: 1;
            margin-right: 12px;
        }
        
        .status-tag {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
            white-space: nowrap;
        }
        
        .status-available {
            background: var(--green-pale);
            color: var(--green-dark);
        }
        
        .status-full {
            background: #fed7d7;
            color: #c53030;
        }
        
        .status-ended {
            background: #e2e8f0;
            color: #718096;
        }
        
        .activity-details {
            display: grid;
            gap: 6px;
            margin-bottom: 8px;
        }
        
        .detail-item {
            display: flex;
            align-items: center;
            font-size: 13px;
            color: #4a5568;
        }
        
        .detail-icon {
            width: 16px;
            height: 16px;
            margin-right: 8px;
            opacity: 0.6;
        }
        
        .strength-rating {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .star {
            color: #ed8936;
            font-size: 12px;
        }
        
        .activity-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 8px;
            border-top: 1px solid #f7fafc;
        }
        
        .participants {
            font-size: 12px;
            color: #718096;
        }
        
        .price {
            font-size: 12px;
            font-weight: 600;
            color: var(--green-dark);
        }
        }
        
        .status-ended {
            background: #f8f9fa;
            color: #9ca3af;
        }
        
        .btn {
            display: block;
            width: 100%;
            padding: 12px 16px;
            border: none;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 500;
            text-align: center;
            cursor: pointer;
            transition: none;
        }
        
        .btn-primary {
            background: #2f5d3a;
            color: white;
        }
        
        .btn-secondary {
            background: white;
            color: #718096;
            border: 1px solid #e2e8f0;
        }
        
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 375px;
            background: white;
            border-top: 1px solid var(--green-pale);
            display: flex;
            align-items: center;
            justify-content: space-around;
            padding: 8px 12px;
            box-sizing: border-box;
        }
        
        .nav-item {
            flex: 1;
            text-align: center;
            padding: 12px 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: #718096;
            transition: all 0.2s;
            border-radius: 6px;
            max-width: 60px;
        }
        
        .nav-item.active {
            color: white;
            background: var(--green-dark);
            font-weight: 600;
        }
        
        .publish-btn-nav {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: var(--green-dark);
            color: white;
            border: none;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(31, 78, 42, 0.3);
            transition: all 0.2s;
            flex-shrink: 0;
        }
        
        .publish-btn-nav:hover {
            background: #1a4325;
            transform: scale(1.05);
        }
        
        .status-badge {
            padding: 1px 4px;
            border-radius: 8px;
            font-size: 10px;
            font-weight: 500;
        }
        
        .status-badge.available {
            background: #f0f8f0;
            color: #2f5d3a;
        }
        
        .status-badge.full {
            background: #e8f5e8;
            color: #3a7a4a;
        }
        
        .status-badge.ended {
            background: #f7fafc;
            color: #718096;
        }
        
        .role-badge {
            padding: 1px 4px;
            border-radius: 8px;
            font-size: 10px;
            font-weight: 500;
        }
        
        .role-admin {
            background: #f0f8f0;
            color: #2f5d3a;
        }
        
        .role-leader {
            background: #e8f5e8;
            color: #3a7a4a;
        }
        
        .role-member {
            background: #f0f0f0;
            color: #4a5568;
        }
        
        .member-item {
            display: flex;
            align-items: center;
            background: white;
            border: 1px solid #f0f0f0;
            border-radius: 4px;
            padding: 12px 16px;
            margin-bottom: 8px;
        }
        
        .member-item:last-child {
            margin-bottom: 0 !important;
        }
        
        .avatar {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #718096;
            font-size: 11px;
            margin-right: 8px;
        }
        
        .member-name {
            font-size: 12px;
            color: #2d3748;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.4);
            z-index: 1000;
        }
        
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 4px;
            padding: 16px;
            margin: 20px;
            max-width: 320px;
            width: 100%;
        }
        
        .modal-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--green-dark);
            margin-bottom: 12px;
            text-align: center;
        }
        
        .modal-header {
            text-align: center;
            margin-bottom: 16px;
        }
        
        .modal-header h3 {
            font-size: 14px;
            font-weight: 600;
            color: var(--green-dark);
        }
        
        .qr-placeholder {
            width: 120px;
            height: 120px;
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #718096;
            font-size: 10px;
            margin: 12px auto;
        }
        
        .divider {
            height: 1px;
            background: #f0f0f0;
            margin: 12px 0;
        }
        
        .input-group {
            margin-bottom: 12px;
        }
        
        .input-label {
            display: block;
            margin-bottom: 4px;
            font-size: 12px;
            color: #4a5568;
        }
        
        .input-field {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            font-size: 12px;
        }
        
        .empty-state {
            text-align: center;
            padding: 24px 8px;
            color: #a0aec0;
        }
        
        .empty-state span {
            display: block;
            font-size: 20px;
            margin-bottom: 8px;
            opacity: 0.5;
        }
        
        .empty-state p {
            font-size: 12px;
        }
        
        .info-list {
            margin-bottom: 8px;
        }
        
        .info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 6px 0;
            border-bottom: 1px solid #f7fafc;
            font-size: 11px;
        }
        
        .info-item:last-child {
            border-bottom: none;
        }
        
        .info-label {
            color: #718096;
        }
        
        .info-value {
            color: #2d3748;
        }
        
        .strength-rating {
            display: flex;
            align-items: center;
            gap: 1px;
        }
        
        .strength-star {
            color: #ed8936;
            font-size: 10px;
        }
        
        .strength-star.empty {
            color: #e2e8f0;
        }
        
        .member-avatars {
            display: flex;
            margin: 6px 0;
        }
        
        .member-avatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #f0f0f0;
            border: 1px solid white;
            margin-left: -4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #718096;
            font-size: 9px;
        }
        
        .member-avatar:first-child {
            margin-left: 0;
        }
        
        .disclaimer {
            background: #fafbfc;
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #f0f0f0;
            margin-top: 12px;
        }
        
        .disclaimer h4 {
            font-size: 11px;
            font-weight: 600;
            color: #718096;
            margin-bottom: 4px;
        }
        
        .disclaimer p {
            font-size: 10px;
            color: #a0aec0;
            line-height: 1.3;
        }
        
        .announcement {
            background: #f8f9fa;
            padding: 16px 20px;
            margin: 16px 0 24px;
            border-radius: 6px;
            border-left: 3px solid #e2e8f0;
        }

        .announcement-title {
            font-size: 13px;
            font-weight: 500;
            color: #4a5568;
            margin-bottom: 6px;
        }

        .announcement-text {
            font-size: 14px;
            color: #2d3748;
            line-height: 1.5;
        }
        
        .page-bottom-action {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 375px;
            padding: 0 20px;
            z-index: 1000;
        }
        
        .organizer-info {
            display: flex;
            align-items: center;
            padding: 6px 0;
            border-top: 1px solid #f7fafc;
            margin-top: 8px;
        }
        
        .organizer-avatar {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #718096;
            font-size: 9px;
            margin-right: 6px;
        }
        
        .organizer-name {
            font-size: 11px;
            color: #718096;
        }
        
        .user-profile {
            background: white;
            border: none;
            padding: 0;
            margin-bottom: 12px;
        }
        
        .profile-info {
            display: flex;
            align-items: center;
        }
        
        .profile-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #718096;
            font-size: 12px;
            margin-right: 8px;
        }
        
        .profile-details h3 {
            font-size: 14px;
            color: #1a202c;
            margin-bottom: 1px;
        }
        
        .profile-details p {
            font-size: 11px;
            color: #718096;
        }
        
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #f7fafc;
            cursor: pointer;
        }
        
        .setting-item:last-child {
            border-bottom: none;
        }
        
        .setting-text {
            font-size: 12px;
            color: #4a5568;
        }
        
        .setting-arrow {
            color: #cbd5e0;
            font-size: 10px;
        }
        
        @media (max-width: 375px) {
            .app-container {
                border-radius: 0;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- ç™»å½•é¡µ -->
        <div id="login-page" class="page active">
            <div style="display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: calc(100vh - 80px); padding: 40px 20px;">
                <!-- Logoå›¾æ ‡ -->
                <div style="width: 64px; height: 64px; background: #2f5d3a; border-radius: 8px; margin-bottom: 24px; display: flex; align-items: center; justify-content: center; color: white; font-size: 28px;">
                    ğŸ”ï¸
                </div>
                
                <!-- æ ‡é¢˜å’Œå‰¯æ ‡é¢˜ -->
                <div style="text-align: center; margin-bottom: 40px;">
                    <h1 style="font-size: 20px; font-weight: 600; color: var(--green-dark); margin-bottom: 8px;">è½»é‡å¾’æ­¥ç¤¾</h1>
                    <p style="font-size: 14px; color: #718096; line-height: 1.4;">ä¸å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·æ¢ç´¢è‡ªç„¶</p>
                </div>
                
                <!-- ç™»å½•æŒ‰é’® -->
                <div style="width: 100%; max-width: 280px; margin-bottom: 32px;">
                    <button class="btn btn-primary" onclick="loginWithWeChat()" style="margin-bottom: 12px;">
                        å¾®ä¿¡ä¸€é”®ç™»å½•
                    </button>
                    <button class="btn btn-secondary" onclick="showPhoneLogin()">
                        æ‰‹æœºå·ç™»å½•
                    </button>
                </div>
                
                <!-- ç”¨æˆ·åè®® -->
                <div style="text-align: center; font-size: 12px; color: #a0aec0; line-height: 1.5;">
                    ç™»å½•å³è¡¨ç¤ºåŒæ„<br>
                    <a href="#" style="color: #2f5d3a; text-decoration: none;">ã€Šç”¨æˆ·åè®®ã€‹</a> å’Œ 
                    <a href="#" style="color: #2f5d3a; text-decoration: none;">ã€Šéšç§æ”¿ç­–ã€‹</a>
                </div>
            </div>
        </div>
        
        <!-- ç¤¾å›¢ä¸»é¡µ -->
        <div id="community-page" class="page">
            <div class="header">
                <!-- æ´»åŠ¨åˆ—è¡¨æ ‡é¢˜å’Œç­›é€‰ -->
                <div class="activity-list-header">
                    <h2 class="page-title">æ´»åŠ¨åˆ—è¡¨</h2>
                    <div class="filter-tabs">
                        <div class="filter-tab active" onclick="filterActivities('all')">å…¨éƒ¨</div>
                        <div class="filter-tab" onclick="filterActivities('available')">å¯æŠ¥å</div>
                        <div class="filter-tab" onclick="filterActivities('upcoming')">å³å°†å¼€å§‹</div>
                    </div>
                </div>
            </div>
            
            <div class="main-content">
                <div class="scroll-container" style="overflow-y: auto; overflow-x: hidden; height: calc(100vh - 140px); margin-top: 6px;">
                    <!-- æ´»åŠ¨åˆ—è¡¨åŒºåŸŸ -->
                    <div class="activity-list-container">
                        <!-- æ´»åŠ¨å¡ç‰‡åˆ—è¡¨ -->
                        <div id="activity-list" class="activity-cards-grid">
                            <!-- æ´»åŠ¨å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                        
                        <!-- æˆå‘˜åˆ—è¡¨ï¼ˆéšè—ï¼‰ -->
                        <div id="members-tab" style="display: none;">
                            <div id="member-list"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- å¹¿åœºé¡µé¢ -->
        <div id="square-page" class="page">
            <div class="header">
                <h1>å¹¿åœº</h1>
                <p>æŸ¥çœ‹æˆå‘˜åˆ†äº«çš„å›¾æ–‡å†…å®¹</p>
            </div>
            
            <div class="main-content">
                <div id="square-content" class="scroll-container" style="overflow-y: auto; overflow-x: hidden; height: calc(100vh - 140px); margin-top: 6px;">
                    <!-- åŠ¨æ€å†…å®¹å°†åœ¨è¿™é‡Œæ’å…¥ -->
                </div>
            </div>
        </div>
        
        <!-- æ´»åŠ¨è¯¦æƒ…é¡µ -->
        <div id="activity-detail-page" class="page">
            <div class="header">
                <h1>æ´»åŠ¨è¯¦æƒ…</h1>
                <p>æŸ¥çœ‹æ´»åŠ¨ä¿¡æ¯å¹¶å‚ä¸æŠ¥å</p>
            </div>
            
            <div class="main-content">
                <div id="activity-detail-content" class="scroll-container" style="overflow-y: auto; overflow-x: hidden; height: calc(100vh - 140px);">
                    <!-- åŠ¨æ€å†…å®¹å°†åœ¨è¿™é‡Œæ’å…¥ -->
                </div>
            </div>
            
            <!-- æ´»åŠ¨æ“ä½œæŒ‰é’® -->
            <div id="activity-actions" class="page-bottom-action">
                <button id="join-btn" class="btn btn-primary">ç«‹å³æŠ¥å</button>
            </div>
        </div>
        
        <!-- æˆ‘çš„é¡µé¢ -->
        <div id="profile-page" class="page">
            <div class="header">
                <h1>ä¸ªäººä¸­å¿ƒ</h1>
                <p>ç®¡ç†ä¸ªäººä¿¡æ¯å’Œæ´»åŠ¨è®°å½•</p>
            </div>
            
            <div class="main-content">
                <div class="scroll-container" style="overflow-y: auto; overflow-x: hidden; height: calc(100vh - 140px); margin-top: 6px;">
                    <!-- ç”¨æˆ·ä¿¡æ¯ -->
                <div class="user-profile">
                    <div class="profile-info">
                        <div class="profile-avatar">å¼ </div>
                        <div class="profile-details">
                            <h3>å¼ ä¸‰</h3>
                            <p>è½»é‡å¾’æ­¥ç¤¾</p>
                        </div>
                        <span class="role-badge role-admin">ç®¡ç†å‘˜</span>
                    </div>
                </div>
                
                <!-- æˆ‘çš„æ´»åŠ¨ -->
                <div class="content-block">
                    <div class="section-title">æˆ‘çš„æ´»åŠ¨</div>
                    
                    <div class="section">
                        <div style="font-size: 12px; font-weight: 500; color: #718096; margin-bottom: 8px;">æˆ‘æŠ¥åçš„æ´»åŠ¨</div>
                        <div id="joined-activities"></div>
                    </div>
                    
                    <div class="section">
                        <div style="font-size: 12px; font-weight: 500; color: #718096; margin-bottom: 8px;">æˆ‘å‘å¸ƒçš„æ´»åŠ¨</div>
                        <div id="published-activities"></div>
                    </div>
                </div>
                
                <!-- è®¾ç½® -->
                <div class="content-block">
                    <div class="section-title">è®¾ç½®</div>
                    
                    <div class="setting-item" onclick="showFeedback()">
                        <span class="setting-text">æ„è§åé¦ˆ</span>
                        <span class="setting-arrow">â†’</span>
                    </div>
                    <div class="setting-item">
                        <span class="setting-text">ç”¨æˆ·åè®®</span>
                        <span class="setting-arrow">â†’</span>
                    </div>
                    <div class="setting-item" onclick="logout()">
                        <span class="setting-text" style="color: #3a7a4a;">é€€å‡ºç™»å½•</span>
                        <span class="setting-arrow">â†’</span>
                    </div>
                </div>
                </div>
            </div>
        </div>
        
        <!-- åº•éƒ¨å¯¼èˆª -->
        <div class="bottom-nav">
            <div class="nav-item active" onclick="switchPage('community')">
                <span>é¦–é¡µ</span>
            </div>
            <div class="nav-item" onclick="switchPage('square')">
                <span>å¹¿åœº</span>
            </div>
            <button class="publish-btn-nav" onclick="showPublishModal()" title="å‘å¸ƒå†…å®¹">+</button>
            <div class="nav-item" onclick="switchPage('activity-detail')">
                <span>æ´»åŠ¨</span>
            </div>
            <div class="nav-item" onclick="switchPage('profile')">
                <span>æˆ‘çš„</span>
            </div>
        </div>
    </div>
    
    <!-- æŠ¥åç¡®è®¤å¼¹çª— -->
    <div id="join-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>æ´»åŠ¨æŠ¥åç¡®è®¤</h3>
            </div>
            
            <div id="join-activity-info" style="margin-bottom: 16px;">
                <!-- æ´»åŠ¨ä¿¡æ¯å°†åœ¨è¿™é‡Œæ’å…¥ -->
            </div>
            
            <div style="background: #f8f9fa; padding: 12px; border-radius: 4px; margin-bottom: 16px;">
                <h4 style="font-size: 12px; font-weight: 600; color: var(--green-dark); margin-bottom: 6px;">æ”¯ä»˜è¯´æ˜</h4>
                <p style="font-size: 11px; color: #718096; line-height: 1.4; margin-bottom: 12px;">
                    å¹³å°ä¸å‚ä¸ä»»ä½•é‡‘é’±äº¤æ˜“ï¼Œè¯·é€šè¿‡ä¸‹æ–¹å¾®ä¿¡äºŒç»´ç å‘æ´»åŠ¨å‘å¸ƒè€…å®Œæˆæ”¯ä»˜ï¼Œæ”¯ä»˜å¤‡æ³¨è¯·å¡«å†™ä½ çš„æ˜µç§°ã€‚
                </p>
                
                <div style="text-align: center;">
                    <div class="qr-placeholder">å¾®ä¿¡æ”¶æ¬¾äºŒç»´ç </div>
                    <p style="font-size: 10px; color: #a0aec0;">å‘å¸ƒè€…ï¼šå¼ ä¸‰</p>
                </div>
            </div>
            
            <div style="display: flex; gap: 8px;">
                <button class="btn btn-secondary" onclick="closeJoinModal()" style="flex: 1;">å–æ¶ˆ</button>
                <button class="btn btn-primary" onclick="confirmPayment()" style="flex: 1;">æˆ‘å·²å®Œæˆæ”¯ä»˜</button>
            </div>
        </div>
    </div>
    
    <!-- æ‰‹æœºå·ç™»å½•å¼¹çª— -->
    <div id="phone-login-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>æ‰‹æœºå·ç™»å½•</h3>
            </div>
            
            <div class="input-group">
                <label class="input-label">æ‰‹æœºå·</label>
                <input type="tel" placeholder="è¯·è¾“å…¥æ‰‹æœºå·" id="phone-input" class="input-field">
            </div>
            
            <div class="input-group">
                <label class="input-label">éªŒè¯ç </label>
                <div style="display: flex; gap: 6px;">
                    <input type="text" placeholder="è¯·è¾“å…¥éªŒè¯ç " id="code-input" class="input-field" style="flex: 1;">
                    <button class="btn btn-secondary" style="width: auto; padding: 8px 12px; font-size: 12px;">è·å–éªŒè¯ç </button>
                </div>
            </div>
            
            <div class="divider"></div>
            
            <div style="display: flex; gap: 8px;">
                <button class="btn btn-secondary" onclick="closePhoneLogin()" style="flex: 1;">å–æ¶ˆ</button>
                <button class="btn btn-primary" onclick="phoneLogin()" style="flex: 1;">ç™»å½•</button>
            </div>
        </div>
    </div>
    
    <script>
        // Mockæ•°æ®
        let currentUser = {
            name: 'å¼ ä¸‰',
            role: 'admin', // admin, leader, member
            phone: '13800138000'
        };
        
        let currentActivity = null;
        
        // æ‰©å±•æ´»åŠ¨æ•°æ®ï¼Œæ”¯æŒæ— é™æ»šåŠ¨
        const activitiesMasterList = [
            {
                id: 1,
                title: 'é»„å±±æ—¥å‡ºå¾’æ­¥',
                date: '2024-03-15',
                time: '04:30',
                location: 'å®‰å¾½é»„å±±é£æ™¯åŒº',
                strength: 4,
                maxParticipants: 20,
                currentParticipants: 12,
                status: 'available',
                description: 'æ¢ç´¢é»„å±±ç»ç¾æ—¥å‡ºï¼Œæ„Ÿå—å¤§è‡ªç„¶çš„ç¥å¥‡é­…åŠ›ã€‚åŒ…å«ä¸“ä¸šå‘å¯¼ã€æ—©é¤å’Œç™»å±±æ–ç§Ÿèµã€‚',
                equipment: 'èˆ’é€‚çš„ç™»å±±é‹ã€ä¿æš–è¡£ç‰©ã€è¶³å¤Ÿçš„æ°´å’Œé£Ÿç‰©',
                cost: 'è´¹ç”¨ï¼š299å…ƒ/äººï¼ŒåŒ…å«æ—©é¤ã€ç™»å±±æ–ç§Ÿèµ',
                organizer: {
                    name: 'æå››',
                    avatar: 'æ'
                },
                registeredMembers: [
                    { name: 'å¼ ä¸‰', avatar: 'å¼ ' },
                    { name: 'æå››', avatar: 'æ' },
                    { name: 'ç‹äº”', avatar: 'ç‹' },
                    { name: 'èµµå…­', avatar: 'èµµ' },
                    { name: 'å­™ä¸ƒ', avatar: 'å­™' }
                ]
            },
            {
                id: 2,
                title: 'æ³°å±±å¤œçˆ¬è§‚æ—¥å‡º',
                date: '2024-03-20',
                time: '22:00',
                location: 'å±±ä¸œæ³°å±±',
                strength: 5,
                maxParticipants: 15,
                currentParticipants: 15,
                status: 'full',
                description: 'å¤œçˆ¬æ³°å±±ï¼Œåœ¨æ³°å±±é¡¶è§‚çœ‹æ—¥å‡ºï¼Œä½“éªŒç™»ä¸´å¤©ä¸‹å°çš„å¿ƒå¢ƒã€‚',
                equipment: 'å¼ºå…‰æ‰‹ç”µç­’ã€é˜²é£å¤–å¥—ã€ç™»å±±æ–ã€å……è¶³çš„æ°´',
                cost: 'è´¹ç”¨ï¼š199å…ƒ/äººï¼ŒåŒ…å«å¯¼æ¸¸æœåŠ¡',
                organizer: {
                    name: 'ç‹äº”',
                    avatar: 'ç‹'
                },
                registeredMembers: []
            },
            {
                id: 3,
                title: 'è¥¿æ¹–ç¯æ¹–å¾’æ­¥',
                date: '2024-03-10',
                time: '08:00',
                location: 'æ­å·è¥¿æ¹–',
                strength: 2,
                maxParticipants: 25,
                currentParticipants: 8,
                status: 'available',
                description: 'è½»æ¾æ„‰å¿«çš„è¥¿æ¹–ç¯æ¹–å¾’æ­¥ï¼Œæ¬£èµæ˜¥æ—¥ç¾æ™¯ï¼Œé€‚åˆæ‰€æœ‰æ°´å¹³çš„å‚ä¸è€…ã€‚',
                equipment: 'èˆ’é€‚çš„æ­¥è¡Œé‹ã€å¸½å­ã€é˜²æ™’éœœ',
                cost: 'è´¹ç”¨ï¼š50å…ƒ/äººï¼ŒåŒ…å«ä¿é™©',
                organizer: {
                    name: 'èµµå…­',
                    avatar: 'èµµ'
                },
                registeredMembers: []
            },
            // æ–°å¢æ´»åŠ¨æ•°æ®
            {
                id: 4,
                title: 'é•¿åŸå¾’æ­¥æŒ‘æˆ˜',
                date: '2024-03-25',
                time: '07:00',
                location: 'åŒ—äº¬å…«è¾¾å²­é•¿åŸ',
                strength: 4,
                maxParticipants: 30,
                currentParticipants: 18,
                status: 'available',
                description: 'æŒ‘æˆ˜ä¸‡é‡Œé•¿åŸï¼Œæ„Ÿå—å¤ä»£å»ºç­‘çš„é›„ä¼Ÿï¼Œé€”ç»å¤šä¸ªçƒ½ç«å°ã€‚',
                equipment: 'èˆ’é€‚ç™»å±±é‹ã€é˜²é£å¤–å¥—ã€å……è¶³çš„æ°´å’Œé«˜èƒ½é‡é£Ÿç‰©',
                cost: 'è´¹ç”¨ï¼š150å…ƒ/äººï¼ŒåŒ…å«å¾€è¿”äº¤é€šå’Œä¿é™©',
                organizer: {
                    name: 'å¼ ä¸‰',
                    avatar: 'å¼ '
                },
                registeredMembers: []
            },
            {
                id: 5,
                title: 'å¼ å®¶ç•Œå¤©é—¨å±±å¾’æ­¥',
                date: '2024-04-01',
                time: '06:00',
                location: 'æ¹–å—å¼ å®¶ç•Œ',
                strength: 5,
                maxParticipants: 12,
                currentParticipants: 5,
                status: 'available',
                description: 'æ¢ç´¢å¼ å®¶ç•Œå¥‡å³°å¼‚çŸ³ï¼ŒæŒ‘æˆ˜å¤©é—¨å±±å¾’æ­¥çº¿è·¯ï¼Œé£æ™¯å£®ä¸½ã€‚',
                equipment: 'ä¸“ä¸šç™»å±±è£…å¤‡ã€é˜²æ»‘ç™»å±±é‹ã€ç™»å±±æ–',
                cost: 'è´¹ç”¨ï¼š399å…ƒ/äººï¼ŒåŒ…å«ç¼†è½¦ã€ä½å®¿å’Œå¯¼æ¸¸',
                organizer: {
                    name: 'æå››',
                    avatar: 'æ'
                },
                registeredMembers: []
            },
            {
                id: 6,
                title: 'é’æµ·æ¹–ç¯æ¹–éª‘è¡Œ',
                date: '2024-04-10',
                time: '08:00',
                location: 'é’æµ·æ¹–',
                strength: 3,
                maxParticipants: 20,
                currentParticipants: 12,
                status: 'available',
                description: 'ç¯é’æµ·æ¹–éª‘è¡Œï¼Œæ¬£èµé«˜åŸæ¹–æ³Šç¾æ™¯ï¼Œä½“éªŒè—æ—æ–‡åŒ–ã€‚',
                equipment: 'è‡ªè¡Œè½¦ï¼ˆå¯ç§Ÿèµï¼‰ã€é˜²æ™’ç”¨å“ã€ä¿æš–è¡£ç‰©',
                cost: 'è´¹ç”¨ï¼š580å…ƒ/äººï¼ŒåŒ…å«è‡ªè¡Œè½¦ç§Ÿèµå’Œä½å®¿',
                organizer: {
                    name: 'ç‹äº”',
                    avatar: 'ç‹'
                },
                registeredMembers: []
            },
            {
                id: 7,
                title: 'ä¹å¯¨æ²Ÿæ˜¥æ¸¸å¾’æ­¥',
                date: '2024-04-15',
                time: '07:30',
                location: 'å››å·ä¹å¯¨æ²Ÿ',
                strength: 3,
                maxParticipants: 25,
                currentParticipants: 8,
                status: 'available',
                description: 'æ˜¥å­£ä¹å¯¨æ²Ÿå¾’æ­¥ï¼Œæ¬£èµå†°é›ªèåŒ–åçš„å½©æ± å’Œç€‘å¸ƒã€‚',
                equipment: 'é˜²æ°´ç™»å±±é‹ã€é˜²é£å¤–å¥—ã€ç›¸æœº',
                cost: 'è´¹ç”¨ï¼š320å…ƒ/äººï¼ŒåŒ…å«é—¨ç¥¨å’Œæ™¯åŒºäº¤é€š',
                organizer: {
                    name: 'èµµå…­',
                    avatar: 'èµµ'
                },
                registeredMembers: []
            },
            {
                id: 8,
                title: 'æ¡‚æ—é˜³æœ”å¾’æ­¥',
                date: '2024-04-20',
                time: '08:00',
                location: 'å¹¿è¥¿æ¡‚æ—é˜³æœ”',
                strength: 2,
                maxParticipants: 35,
                currentParticipants: 22,
                status: 'available',
                description: 'æ¡‚æ—å±±æ°´ç”²å¤©ä¸‹ï¼Œé˜³æœ”å±±æ°´ç”²æ¡‚æ—ï¼Œå¾’æ­¥æ¬£èµå–€æ–¯ç‰¹åœ°è²Œã€‚',
                equipment: 'èˆ’é€‚å¾’æ­¥é‹ã€é˜²æ™’ç”¨å“ã€é›¨å…·',
                cost: 'è´¹ç”¨ï¼š180å…ƒ/äººï¼ŒåŒ…å«ç«¹ç­æ¼‚æµ',
                organizer: {
                    name: 'å­™ä¸ƒ',
                    avatar: 'å­™'
                },
                registeredMembers: []
            },
            {
                id: 9,
                title: 'åå±±ç™»å±±æŒ‘æˆ˜',
                date: '2024-04-25',
                time: '05:00',
                location: 'é™•è¥¿åå±±',
                strength: 5,
                maxParticipants: 15,
                currentParticipants: 9,
                status: 'available',
                description: 'æŒ‘æˆ˜åå±±äº”å³°ï¼Œä½“éªŒåå±±è®ºå‰‘çš„æ­¦ä¾ æƒ…æ€€ï¼Œè§‚èµæ—¥å‡ºäº‘æµ·ã€‚',
                equipment: 'ä¸“ä¸šç™»å±±è£…å¤‡ã€æ‰‹å¥—ã€é˜²æ»‘é‹ã€å¤´ç¯',
                cost: 'è´¹ç”¨ï¼š280å…ƒ/äººï¼ŒåŒ…å«é—¨ç¥¨å’Œå¯¼æ¸¸',
                organizer: {
                    name: 'å‘¨å…«',
                    avatar: 'å‘¨'
                },
                registeredMembers: []
            },
            {
                id: 10,
                title: 'æ³°å±±å¤œçˆ¬è§‚æ—¥å‡º',
                date: '2024-05-01',
                time: '22:00',
                location: 'å±±ä¸œæ³°å±±',
                strength: 4,
                maxParticipants: 20,
                currentParticipants: 6,
                status: 'available',
                description: 'å¤œçˆ¬æ³°å±±ï¼Œåœ¨æ³°å±±é¡¶è§‚çœ‹æ—¥å‡ºï¼Œä½“éªŒç™»ä¸´å¤©ä¸‹å°çš„å¿ƒå¢ƒã€‚',
                equipment: 'å¼ºå…‰æ‰‹ç”µç­’ã€é˜²é£å¤–å¥—ã€ç™»å±±æ–ã€å……è¶³çš„æ°´',
                cost: 'è´¹ç”¨ï¼š199å…ƒ/äººï¼ŒåŒ…å«å¯¼æ¸¸æœåŠ¡',
                organizer: {
                    name: 'å´ä¹',
                    avatar: 'å´'
                },
                registeredMembers: []
            },
            {
                id: 11,
                title: 'å¼ å®¶ç•Œé‡‘é­æºªå¾’æ­¥',
                date: '2024-05-05',
                time: '08:30',
                location: 'æ¹–å—å¼ å®¶ç•Œ',
                strength: 3,
                maxParticipants: 18,
                currentParticipants: 7,
                status: 'available',
                description: 'é‡‘é­æºªå¾’æ­¥ï¼Œæ¸…æ¾ˆæºªæµï¼Œå¥‡å³°æ—ç«‹ï¼Œè´Ÿæ°§ç¦»å­ä¸°å¯Œã€‚',
                equipment: 'é˜²æ»‘é‹ã€é˜²èšŠæ¶²ã€é˜²æ™’ç”¨å“',
                cost: 'è´¹ç”¨ï¼š220å…ƒ/äººï¼ŒåŒ…å«é—¨ç¥¨å’Œå¯¼æ¸¸',
                organizer: {
                    name: 'éƒ‘å',
                    avatar: 'éƒ‘'
                },
                registeredMembers: []
            },
            {
                id: 12,
                title: 'åºå±±ä¸‰å æ³‰å¾’æ­¥',
                date: '2024-05-10',
                time: '07:00',
                location: 'æ±Ÿè¥¿åºå±±',
                strength: 4,
                maxParticipants: 25,
                currentParticipants: 14,
                status: 'available',
                description: 'åºå±±ä¸‰å æ³‰ç€‘å¸ƒå¾’æ­¥ï¼Œå±‚å±‚å å ï¼Œæ°”åŠ¿ç£…ç¤´ã€‚',
                equipment: 'ç™»å±±é‹ã€é›¨è¡£ã€å……è¶³çš„æ°´',
                cost: 'è´¹ç”¨ï¼š160å…ƒ/äººï¼ŒåŒ…å«é—¨ç¥¨',
                organizer: {
                    name: 'é’±ä¸€',
                    avatar: 'é’±'
                },
                registeredMembers: []
            },
            {
                id: 13,
                title: 'å³¨çœ‰å±±å¾’æ­¥æœåœ£',
                date: '2024-05-15',
                time: '06:30',
                location: 'å››å·å³¨çœ‰å±±',
                strength: 4,
                maxParticipants: 20,
                currentParticipants: 11,
                status: 'available',
                description: 'å³¨çœ‰å±±å¾’æ­¥æœåœ£ä¹‹æ—…ï¼Œé‡‘é¡¶çœ‹æ—¥å‡ºï¼Œä½“éªŒä½›æ•™æ–‡åŒ–ã€‚',
                equipment: 'ç™»å±±æ–ã€é˜²é£å¤–å¥—ã€æŠ¤è†',
                cost: 'è´¹ç”¨ï¼š280å…ƒ/äººï¼ŒåŒ…å«ç¼†è½¦å’Œä½å®¿',
                organizer: {
                    name: 'é’±äºŒ',
                    avatar: 'é’±'
                },
                registeredMembers: []
            },
            {
                id: 14,
                title: 'é»„å±±åå±±å¾’æ­¥',
                date: '2024-05-20',
                time: '07:00',
                location: 'å®‰å¾½é»„å±±é£æ™¯åŒº',
                strength: 4,
                maxParticipants: 15,
                currentParticipants: 4,
                status: 'available',
                description: 'é»„å±±åå±±å¾’æ­¥çº¿è·¯ï¼Œäººå°‘æ™¯ç¾ï¼Œæ·±åº¦ä½“éªŒé»„å±±ä¹‹ç¾ã€‚',
                equipment: 'ç™»å±±é‹ã€é›¨å…·ã€é˜²å¯’è¡£ç‰©',
                cost: 'è´¹ç”¨ï¼š320å…ƒ/äººï¼ŒåŒ…å«é—¨ç¥¨å’Œå¯¼æ¸¸',
                organizer: {
                    name: 'é’±ä¸‰',
                    avatar: 'é’±'
                },
                registeredMembers: []
            },
            {
                id: 15,
                title: 'æ­¦åŠŸå±±è‰ç”¸å¾’æ­¥',
                date: '2024-05-25',
                time: '08:00',
                location: 'æ±Ÿè¥¿æ­¦åŠŸå±±',
                strength: 3,
                maxParticipants: 30,
                currentParticipants: 19,
                status: 'available',
                description: 'æ­¦åŠŸå±±é«˜å±±è‰ç”¸å¾’æ­¥ï¼Œä¸‡äº©è‰ç”¸ï¼Œè§†é‡å¼€é˜”ã€‚',
                equipment: 'ç™»å±±é‹ã€é˜²é£è¡£ã€å¸½å­',
                cost: 'è´¹ç”¨ï¼š120å…ƒ/äººï¼ŒåŒ…å«äº¤é€š',
                organizer: {
                    name: 'é’±å››',
                    avatar: 'é’±'
                },
                registeredMembers: []
            }
        ];

        // æ— é™æ»šåŠ¨ç›¸å…³å˜é‡
        let currentPage = 0;
        const activitiesPerPage = 5;
        let isLoading = false;
        let hasMoreActivities = true;
        let activities = [];
        
        const members = [
            { name: 'å¼ ä¸‰', role: 'admin', avatar: 'å¼ ' },
            { name: 'æå››', role: 'leader', avatar: 'æ' },
            { name: 'ç‹äº”', role: 'leader', avatar: 'ç‹' },
            { name: 'èµµå…­', role: 'member', avatar: 'èµµ' },
            { name: 'å­™ä¸ƒ', role: 'member', avatar: 'å­™' },
            { name: 'å‘¨å…«', role: 'member', avatar: 'å‘¨' },
            { name: 'å´ä¹', role: 'member', avatar: 'å´' },
            { name: 'éƒ‘å', role: 'member', avatar: 'éƒ‘' }
        ];
        
        // é¡µé¢åˆ‡æ¢
        function switchPage(pageName) {
            const currentActivePage = document.querySelector('.page.active');
            const targetPage = document.getElementById(pageName + '-page');
            
            if (!targetPage || currentActivePage === targetPage) return;
            
            // éšè—å½“å‰é¡µé¢
            currentActivePage.classList.remove('active');
            
            // å»¶è¿Ÿæ˜¾ç¤ºæ–°é¡µé¢ä»¥åˆ›å»ºæ»‘åŠ¨æ•ˆæœ
            setTimeout(() => {
                targetPage.classList.add('active');
            }, 50);
            
            // æ›´æ–°åº•éƒ¨å¯¼èˆªçŠ¶æ€
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            if (pageName === 'community') {
                document.querySelectorAll('.nav-item')[0].classList.add('active');
            } else if (pageName === 'square') {
                document.querySelectorAll('.nav-item')[1].classList.add('active');
            } else if (pageName === 'activity-detail') {
                document.querySelectorAll('.nav-item')[2].classList.add('active');
            } else if (pageName === 'profile') {
                document.querySelectorAll('.nav-item')[3].classList.add('active');
            }
            
            // åŠ è½½å¯¹åº”é¡µé¢çš„æ•°æ®
            if (pageName === 'community') {
                loadCommunityData();
            } else if (pageName === 'square') {
                loadSquareData();
            } else if (pageName === 'profile') {
                loadProfileData();
            } else if (pageName === 'activity-detail' && currentActivity) {
                // æ´»åŠ¨è¯¦æƒ…é¡µå·²æœ‰æ•°æ®ï¼Œæ— éœ€é¢å¤–åŠ è½½
            }
        }
        
        // åŠ è½½ç¤¾å›¢æ•°æ®
        function loadCommunityData() {
            loadActivityList();
            loadMemberList();
        }
        
        // åˆå§‹åŒ–æ´»åŠ¨åˆ—è¡¨
        function loadActivityList() {
            // é‡ç½®çŠ¶æ€
            currentPage = 0;
            activities = [];
            hasMoreActivities = true;
            isLoading = false;
            
            const container = document.getElementById('activity-list');
            container.innerHTML = '';
            
            // ç§»é™¤æ—§çš„åŠ è½½æç¤º
            const oldLoadingIndicator = document.getElementById('loading-indicator');
            if (oldLoadingIndicator) {
                oldLoadingIndicator.remove();
            }
            
            // ç›´æ¥åŠ è½½æ‰€æœ‰æ´»åŠ¨æ•°æ®
            activities = activitiesMasterList;
            
            // æ¸²æŸ“æ´»åŠ¨åˆ—è¡¨
            renderActivityList();
        }



        // æ´»åŠ¨ç­›é€‰åŠŸèƒ½
        function filterActivities(filterType) {
            // æ›´æ–°ç­›é€‰æ ‡ç­¾çŠ¶æ€
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // æ¿€æ´»å½“å‰ç­›é€‰æ ‡ç­¾
            const activeTab = document.querySelector(`.filter-tab[onclick*="'${filterType}'"]`);
            if (activeTab) {
                activeTab.classList.add('active');
            }
            
            // æ ¹æ®ç­›é€‰ç±»å‹è¿‡æ»¤æ´»åŠ¨
            let filteredActivities = activitiesMasterList;
            
            switch(filterType) {
                case 'available':
                    filteredActivities = activitiesMasterList.filter(activity => activity.status === 'available');
                    break;
                case 'upcoming':
                    // ç­›é€‰å³å°†å¼€å§‹çš„æ´»åŠ¨ï¼ˆæœªæ¥7å¤©å†…ï¼‰
                    const today = new Date();
                    const nextWeek = new Date(today.getTime() + 7 * 24 * 60 * 60 * 1000);
                    filteredActivities = activitiesMasterList.filter(activity => {
                        const activityDate = new Date(activity.date);
                        return activityDate >= today && activityDate <= nextWeek;
                    });
                    break;
                case 'all':
                default:
                    filteredActivities = activitiesMasterList;
                    break;
            }
            
            // æ›´æ–°æ´»åŠ¨åˆ—è¡¨
            activities = filteredActivities;
            renderActivityList();
        }

        // æ¸²æŸ“æ´»åŠ¨åˆ—è¡¨
        function renderActivityList() {
            const container = document.getElementById('activity-list');
            container.innerHTML = '';
            
            activities.forEach(activity => {
                const date = new Date(activity.date);
                const weekDays = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
                const weekDay = weekDays[date.getDay()];
                const statusClass = activity.status === 'available' ? 'status-available' : 
                                  activity.status === 'full' ? 'status-full' : 'status-ended';
                const statusText = activity.status === 'available' ? 'å¯æŠ¥å' : 
                                 activity.status === 'full' ? 'å·²æ»¡å‘˜' : 'å·²æˆªæ­¢';
                
                // ç”Ÿæˆæ˜Ÿæ˜Ÿè¯„çº§
                const stars = 'â˜…'.repeat(activity.strength) + 'â˜†'.repeat(5 - activity.strength);
                
                const activityCard = document.createElement('div');
                activityCard.className = 'activity-card';
                activityCard.onclick = () => showActivityDetail(activity.id);
                
                activityCard.innerHTML = `
                    <div class="activity-header">
                        <div class="activity-title">${activity.title}</div>
                        <span class="status-tag ${statusClass}">${statusText}</span>
                    </div>
                    <div class="activity-details">
                        <div class="detail-item">
                            <span>${activity.date} å‘¨${weekDay} ${activity.time}</span>
                        </div>
                        <div class="detail-item">
                            <span>${activity.location}</span>
                        </div>
                        <div class="detail-item">
                            <div class="strength-rating">
                                <span class="star">${stars}</span>
                                <span>å¼ºåº¦ ${activity.strength}/5</span>
                            </div>
                        </div>
                    </div>
                    <div class="activity-footer">
                        <span class="participants">${activity.currentParticipants}/${activity.maxParticipants}äºº</span>
                        <span class="price">${activity.cost}</span>
                    </div>
                `;
                
                container.appendChild(activityCard);
            });
        }


        
        // åŠ è½½æˆå‘˜åˆ—è¡¨
        function loadMemberList() {
            const container = document.getElementById('member-list');
            container.innerHTML = members.map(member => {
                const roleClass = member.role === 'admin' ? 'role-admin' : 
                                member.role === 'leader' ? 'role-leader' : 'role-member';
                const roleText = member.role === 'admin' ? 'ç®¡ç†å‘˜' : 
                               member.role === 'leader' ? 'é¢†é˜Ÿ' : 'æˆå‘˜';
                
                return `
                    <div class="member-item">
                        <div class="avatar">${member.avatar}</div>
                        <div style="flex: 1;">
                            <div style="font-weight: 500; color: var(--green-dark);">${member.name}</div>
                            <span class="role-tag ${roleClass}">${roleText}</span>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // Tabåˆ‡æ¢
        function switchTab(tabName) {
            // æ›´æ–°TabçŠ¶æ€
            document.querySelectorAll('.tab-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // æ˜¾ç¤º/éšè—å¯¹åº”å†…å®¹
            document.getElementById('activities-tab').style.display = tabName === 'activities' ? 'block' : 'none';
            document.getElementById('members-tab').style.display = tabName === 'members' ? 'block' : 'none';
        }
        
        // æ˜¾ç¤ºæ´»åŠ¨è¯¦æƒ…
        function showActivityDetail(activityId) {
            // ä»å®Œæ•´åˆ—è¡¨ä¸­æŸ¥æ‰¾æ´»åŠ¨
            const activity = activitiesMasterList.find(a => a.id === activityId);
            if (!activity) return;
            
            currentActivity = activity;
            const container = document.getElementById('activity-detail-content');
            
            const date = new Date(activity.date);
            const weekDays = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
            const weekDay = weekDays[date.getDay()];
            
            container.innerHTML = `
                <div class="card" style="border: 1px solid #f0f0f0; border-radius: 4px; padding: 12px; margin-bottom: 8px;">
                    <h2 style="font-size: 16px; font-weight: 600; color: var(--green-dark); margin-bottom: 16px;">${activity.title}</h2>
                    
                    <div class="activity-meta">
                        <span>æ—¶é—´ï¼š${activity.date} å‘¨${weekDay} ${activity.time}</span>
                        <span>åœ°ç‚¹ï¼š${activity.location}</span>
                        <span>äººæ•°ï¼š${activity.currentParticipants}/${activity.maxParticipants}äºº</span>
                    </div>
                    
                    <div style="margin: 8px 0;">
                        <span style="color: #718096; margin-right: 6px; font-size: 12px;">å¼ºåº¦ç­‰çº§ï¼š</span>
                        <span class="strength-stars">${'â˜…'.repeat(activity.strength)}${'â˜†'.repeat(5 - activity.strength)}</span>
                    </div>
                </div>
                
                <div class="card" style="border: 1px solid #f0f0f0; border-radius: 4px; padding: 12px; margin-bottom: 8px;">
                    <h3 style="font-size: 14px; font-weight: 600; color: var(--green-dark); margin-bottom: 8px;">æ´»åŠ¨ä»‹ç»</h3>
                    <p style="color: #4a5568; line-height: 1.4; margin-bottom: 12px; font-size: 12px;">${activity.description}</p>
                    
                    <h4 style="font-size: 12px; font-weight: 600; color: var(--green-dark); margin-bottom: 6px;">è£…å¤‡è¦æ±‚</h4>
                    <p style="color: #4a5568; line-height: 1.4; margin-bottom: 12px; font-size: 12px;">${activity.equipment}</p>
                    
                    <h4 style="font-size: 12px; font-weight: 600; color: var(--green-dark); margin-bottom: 6px;">è´¹ç”¨è¯´æ˜</h4>
                    <p style="color: #4a5568; line-height: 1.4; font-size: 12px;">${activity.cost}</p>
                </div>
                
                <div class="card" style="border: 1px solid #f0f0f0; border-radius: 4px; padding: 12px; margin-bottom: 8px;">
                    <h3 style="font-size: 14px; font-weight: 600; color: var(--green-dark); margin-bottom: 8px;">å·²æŠ¥åæˆå‘˜</h3>
                    <p style="color: #718096; margin-bottom: 8px; font-size: 12px;">${activity.currentParticipants}/${activity.maxParticipants}äºº</p>
                    
                    <div class="member-avatars">
                        ${activity.registeredMembers.map(member => `
                            <div class="member-avatar" title="${member.name}">${member.avatar}</div>
                        `).join('')}
                        ${activity.currentParticipants > activity.registeredMembers.length ? 
                            `<div class="member-avatar" style="background: #e2e8f0; color: #718096;">+${activity.currentParticipants - activity.registeredMembers.length}</div>` : ''
                        }
                    </div>
                    
                    ${(currentUser.role === 'admin' || currentUser.role === 'leader') ? 
                        '<p style="color: #2f5d3a; font-size: 12px; cursor: pointer;">æŸ¥çœ‹å®Œæ•´åå• â†’</p>' : ''
                    }
                </div>
                
                <div class="disclaimer">
                    <h4>å…è´£å£°æ˜</h4>
                    <p>å‚ä¸æˆ·å¤–æ´»åŠ¨å­˜åœ¨ä¸€å®šé£é™©ï¼Œè¯·å‚ä¸è€…å……åˆ†äº†è§£æ´»åŠ¨å†…å®¹å’Œæ½œåœ¨é£é™©ï¼Œè‡ªæ„¿å‚åŠ ã€‚ç»„ç»‡è€…å·²è´­ä¹°ç›¸å…³ä¿é™©ï¼Œä½†ä»éœ€å‚ä¸è€…æ³¨æ„è‡ªèº«å®‰å…¨ï¼Œå¬ä»é¢†é˜ŸæŒ‡æŒ¥ã€‚</p>
                </div>
                
                <!-- æ·»åŠ 100pxç©ºç™½åŒºåŸŸä»¥å¢åŠ æ»šåŠ¨è·ç¦» -->
                <div style="height: 100px;"></div>
            `;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            const joinBtn = document.getElementById('join-btn');
            if (activity.status === 'available') {
                joinBtn.textContent = 'ç«‹å³æŠ¥å';
                joinBtn.className = 'btn btn-primary';
                joinBtn.onclick = () => showJoinModal(activity);
            } else if (activity.status === 'full') {
                joinBtn.textContent = 'åé¢å·²æ»¡';
                joinBtn.className = 'btn btn-secondary';
                joinBtn.onclick = null;
            } else {
                joinBtn.textContent = 'æ´»åŠ¨å·²ç»“æŸ';
                joinBtn.className = 'btn btn-secondary';
                joinBtn.onclick = null;
            }
            
            // åˆ‡æ¢åˆ°æ´»åŠ¨è¯¦æƒ…é¡µ
            switchPage('activity-detail');
        }
        
        // æ˜¾ç¤ºæŠ¥åå¼¹çª—
        function showJoinModal(activity) {
            const modal = document.getElementById('join-modal');
            const infoContainer = document.getElementById('join-activity-info');
            
            infoContainer.innerHTML = `
                <h4 style="font-size: 14px; font-weight: 600; color: var(--green-dark); margin-bottom: 12px;">${activity.title}</h4>
                <p style="color: #4a5568; margin-bottom: 6px; font-size: 12px;">æ—¶é—´ï¼š${activity.date} ${activity.time}</p>
                <p style="color: #4a5568; margin-bottom: 12px; font-size: 12px;">è´¹ç”¨ï¼š${activity.cost}</p>
                <p style="font-size: 11px; color: #718096;">æŠ¥ååè¯·åŠæ—¶å®Œæˆæ”¯ä»˜</p>
            `;
            
            modal.classList.add('active');
        }
        
        // å…³é—­æŠ¥åå¼¹çª—
        function closeJoinModal() {
            document.getElementById('join-modal').classList.remove('active');
        }
        
        // ç¡®è®¤æ”¯ä»˜
        function confirmPayment() {
            if (currentActivity) {
                // æ›´æ–°æ´»åŠ¨æŠ¥åäººæ•°ï¼ˆåŒæ—¶æ›´æ–°master listå’Œå½“å‰åˆ†é¡µæ•°æ®ï¼‰
                const masterActivity = activitiesMasterList.find(a => a.id === currentActivity.id);
                if (masterActivity) {
                    masterActivity.currentParticipants++;
                    if (masterActivity.currentParticipants >= masterActivity.maxParticipants) {
                        masterActivity.status = 'full';
                    }
                    
                    // æ·»åŠ åˆ°å·²æŠ¥ååˆ—è¡¨
                    masterActivity.registeredMembers.push({
                        name: currentUser.name,
                        avatar: currentUser.name.charAt(0)
                    });
                }
                
                // æ›´æ–°å½“å‰æ´»åŠ¨å¯¹è±¡
                currentActivity.currentParticipants++;
                if (currentActivity.currentParticipants >= currentActivity.maxParticipants) {
                    currentActivity.status = 'full';
                }
                currentActivity.registeredMembers.push({
                    name: currentUser.name,
                    avatar: currentUser.name.charAt(0)
                });
                
                closeJoinModal();
                alert('æŠ¥åæˆåŠŸï¼è¯·ä¿å­˜å¥½æ”¯ä»˜æˆªå›¾ä½œä¸ºå‡­è¯ã€‚');
                
                // åˆ·æ–°å½“å‰é¡µé¢
                if (document.getElementById('community-page').classList.contains('active')) {
                    loadActivityList();
                } else if (document.getElementById('activity-detail-page').classList.contains('active')) {
                    showActivityDetail(currentActivity.id);
                }
            }
        }
        
        // æ˜¾ç¤ºæ‰‹æœºå·ç™»å½•
        function showPhoneLogin() {
            document.getElementById('phone-login-modal').classList.add('active');
        }
        
        // å…³é—­æ‰‹æœºå·ç™»å½•
        function closePhoneLogin() {
            document.getElementById('phone-login-modal').classList.remove('active');
        }
        
        // æ‰‹æœºå·ç™»å½•
        function phoneLogin() {
            const phone = document.getElementById('phone-input').value;
            const code = document.getElementById('code-input').value;
            
            if (!phone || !code) {
                alert('è¯·å¡«å†™å®Œæ•´ä¿¡æ¯');
                return;
            }
            
            // Mockç™»å½•é€»è¾‘
            currentUser.phone = phone;
            closePhoneLogin();
            loginSuccess();
        }
        
        // å¾®ä¿¡ç™»å½•
        function loginWithWeChat() {
            // Mockå¾®ä¿¡ç™»å½•é€»è¾‘
            loginSuccess();
        }
        
        // ç™»å½•æˆåŠŸ
        function loginSuccess() {
            console.log('=== ç™»å½•æˆåŠŸå¤„ç†å¼€å§‹ ===');
            
            // éšè—ç™»å½•é¡µï¼Œæ˜¾ç¤ºç¤¾å›¢ä¸»é¡µ
            const loginPage = document.getElementById('login-page');
            const communityPage = document.getElementById('community-page');
            
            if (loginPage) {
                loginPage.classList.remove('active');
                console.log('å·²éšè—ç™»å½•é¡µ');
            } else {
                console.error('æ‰¾ä¸åˆ°ç™»å½•é¡µå…ƒç´ ');
            }
            
            if (communityPage) {
                communityPage.classList.add('active');
                console.log('å·²æ˜¾ç¤ºç¤¾å›¢ä¸»é¡µ');
            } else {
                console.error('æ‰¾ä¸åˆ°ç¤¾å›¢ä¸»é¡µå…ƒç´ ');
            }
            
            // åŠ è½½ç¤¾å›¢æ•°æ®
            console.log('å¼€å§‹åŠ è½½ç¤¾å›¢æ•°æ®');
            loadCommunityData();
            
            // æ˜¾ç¤ºåº•éƒ¨å¯¼èˆªæ 
            const appContainer = document.querySelector('.app-container');
            if (appContainer) {
                appContainer.classList.remove('hide-nav');
                console.log('å·²æ˜¾ç¤ºåº•éƒ¨å¯¼èˆª');
            } else {
                console.error('æ‰¾ä¸åˆ°.app-containerå…ƒç´ ');
            }
            
            // æ›´æ–°åº•éƒ¨å¯¼èˆª - ä¿æŒå½“å‰å¯¼èˆªçŠ¶æ€ï¼Œä¸å¼ºåˆ¶è®¾ç½®ç¬¬ä¸€ä¸ª
            const navItems = document.querySelectorAll('.nav-item');
            if (navItems.length === 0) {
                console.error('æ‰¾ä¸åˆ°å¯¼èˆªé¡¹');
            }
            
            console.log('=== ç™»å½•æˆåŠŸå¤„ç†å®Œæˆ ===');
        }
        
        // åŠ è½½ä¸ªäººé¡µé¢æ•°æ®
        function loadProfileData() {
            // åŠ è½½å·²æŠ¥åæ´»åŠ¨
            const joinedContainer = document.getElementById('joined-activities');
            const joinedActivities = activitiesMasterList.filter(a => 
                a.registeredMembers.some(m => m.name === currentUser.name)
            );
            
            if (joinedActivities.length === 0) {
                joinedContainer.innerHTML = '<div class="empty-state"><span>ğŸ“…</span><p>æš‚æ— å·²æŠ¥åæ´»åŠ¨</p></div>';
            } else {
                joinedContainer.innerHTML = joinedActivities.map(activity => `
                    <div style="padding: 8px; border: 1px solid #f0f0f0; border-radius: 4px; margin-bottom: 6px; cursor: pointer;" 
                         onclick="showActivityDetail(${activity.id})">
                        <div style="font-weight: 500; color: #2d3748; margin-bottom: 2px; font-size: 12px;">${activity.title}</div>
                        <div style="font-size: 11px; color: #718096;">${activity.date} ${activity.time}</div>
                    </div>
                `).join('');
            }
            
            // åŠ è½½å·²å‘å¸ƒæ´»åŠ¨ï¼ˆä»…ç®¡ç†å‘˜/é¢†é˜Ÿå¯è§ï¼‰
            const publishedContainer = document.getElementById('published-activities');
            if (currentUser.role === 'admin' || currentUser.role === 'leader') {
                const publishedActivities = activitiesMasterList.filter(a => a.organizer.name === currentUser.name);
                if (publishedActivities.length === 0) {
                    publishedContainer.innerHTML = '<div class="empty-state"><span>ğŸ“‹</span><p>æš‚æ— å·²å‘å¸ƒæ´»åŠ¨</p></div>';
                } else {
                    publishedContainer.innerHTML = publishedActivities.map(activity => `
                        <div style="padding: 8px; border: 1px solid #f0f0f0; border-radius: 4px; margin-bottom: 6px; cursor: pointer;" 
                             onclick="showActivityDetail(${activity.id})">
                            <div style="font-weight: 500; color: #2d3748; margin-bottom: 2px; font-size: 12px;">${activity.title}</div>
                            <div style="font-size: 11px; color: #718096;">${activity.date} ${activity.time}</div>
                        </div>
                    `).join('');
                }
            } else {
                publishedContainer.innerHTML = '<div style="padding: 8px; text-align: center; color: #a0aec0; font-size: 11px;">ä»…ç®¡ç†å‘˜å’Œé¢†é˜Ÿå¯å‘å¸ƒæ´»åŠ¨</div>';
            }
        }
        
        // åŠ è½½å¹¿åœºæ•°æ®
        function loadSquareData() {
            const container = document.getElementById('square-content');
            
            // æ¨¡æ‹Ÿå¹¿åœºå†…å®¹æ•°æ® - å¢åŠ æ›´å¤šå†…å®¹æ¡
            const squarePosts = [
                {
                    id: 1,
                    author: 'å¼ ä¸‰',
                    avatar: 'å¼ ',
                    content: 'ä»Šå¤©å‚åŠ äº†è½»é‡å¾’æ­¥ç¤¾çš„ç™»å±±æ´»åŠ¨ï¼Œæ„Ÿå—åˆ°äº†å¤§è‡ªç„¶çš„é­…åŠ›ï¼å±±é£æ™¯ç¾ä¸èƒœæ”¶ï¼Œç©ºæ°”æ¸…æ–°ï¼Œè®©äººèº«å¿ƒæ„‰æ‚¦ã€‚',
                    images: [],
                    time: '2å°æ—¶å‰',
                    likes: 12,
                    comments: 3
                },
                {
                    id: 2,
                    author: 'æå››',
                    avatar: 'æ',
                    content: 'åˆ†äº«å‡ å¼ ä»Šå¤©æ‹çš„ç…§ç‰‡ï¼Œéƒ½æ˜¯åœ¨å¤§è‡ªç„¶ä¸­è®°å½•ä¸‹çš„ç¾å¥½ç¬é—´ã€‚å¸Œæœ›ä¸‹æ¬¡è¿˜èƒ½å’Œä¼™ä¼´ä»¬ä¸€èµ·å¾’æ­¥ï¼',
                    images: ['photo1.jpg', 'photo2.jpg'],
                    time: '4å°æ—¶å‰',
                    likes: 8,
                    comments: 2
                },
                {
                    id: 3,
                    author: 'ç‹äº”',
                    avatar: 'ç‹',
                    content: 'æ–°æ‰‹å‹å¥½è·¯çº¿ï¼Œé€‚åˆåˆšåŠ å…¥çš„ä¼™ä¼´ä»¬ã€‚è™½ç„¶è·¯ç¨‹ä¸é•¿ï¼Œä½†é£æ™¯å¾ˆæ£’ï¼Œå›¢é˜Ÿæ°›å›´ä¹Ÿéå¸¸å¥½ï¼',
                    images: [],
                    time: 'æ˜¨å¤©',
                    likes: 15,
                    comments: 5
                },
                {
                    id: 4,
                    author: 'èµµå…­',
                    avatar: 'èµµ',
                    content: 'å‘¨æœ«çš„å¾’æ­¥æ´»åŠ¨çœŸæ˜¯å¤ªæ£’äº†ï¼è®¤è¯†äº†å¾ˆå¤šæ–°æœ‹å‹ï¼Œå¤§å®¶ä¸€èµ·åˆ†äº«å¾’æ­¥ç»éªŒï¼Œæ”¶è·æ»¡æ»¡ã€‚',
                    images: ['photo3.jpg'],
                    time: 'æ˜¨å¤©',
                    likes: 10,
                    comments: 4
                },
                {
                    id: 5,
                    author: 'å­™ä¸ƒ',
                    avatar: 'å­™',
                    content: 'ç¬¬ä¸€æ¬¡å‚åŠ è½»é‡çš„æ´»åŠ¨ï¼Œé¢†é˜Ÿéå¸¸ä¸“ä¸šï¼Œè·¯çº¿å®‰æ’åˆç†ï¼ŒæœŸå¾…ä¸‹æ¬¡çš„æ´»åŠ¨ï¼',
                    images: [],
                    time: '2å¤©å‰',
                    likes: 7,
                    comments: 3
                },
                {
                    id: 6,
                    author: 'å‘¨å…«',
                    avatar: 'å‘¨',
                    content: 'ä»Šå¤©å¤©æ°”ç‰¹åˆ«å¥½ï¼Œé€‚åˆå¾’æ­¥ã€‚å±±ä¸Šçš„é£æ™¯è®©äººå¿ƒæ—·ç¥æ€¡ï¼Œæ¨èå¤§å®¶éƒ½æ¥å‚åŠ ï¼',
                    images: ['photo4.jpg', 'photo5.jpg'],
                    time: '2å¤©å‰',
                    likes: 18,
                    comments: 6
                },
                {
                    id: 7,
                    author: 'å´ä¹',
                    avatar: 'å´',
                    content: 'è½»é‡å¾’æ­¥ç¤¾çš„æ´»åŠ¨ç»„ç»‡å¾—éå¸¸å¥½ï¼Œå®‰å…¨æªæ–½åˆ°ä½ï¼Œé€‚åˆå„ä¸ªå¹´é¾„æ®µçš„å‚ä¸è€…ã€‚',
                    images: [],
                    time: '3å¤©å‰',
                    likes: 9,
                    comments: 2
                },
                {
                    id: 8,
                    author: 'éƒ‘å',
                    avatar: 'éƒ‘',
                    content: 'ä»Šå¤©æŒ‘æˆ˜äº†éš¾åº¦è¾ƒé«˜çš„è·¯çº¿ï¼Œè™½ç„¶æœ‰ç‚¹ç´¯ï¼Œä½†ç™»é¡¶åçš„æˆå°±æ„Ÿæ— æ³•ç”¨è¨€è¯­è¡¨è¾¾ï¼',
                    images: ['photo6.jpg'],
                    time: '3å¤©å‰',
                    likes: 14,
                    comments: 5
                }
            ];
            
            const html = squarePosts.map(post => `
                <div class="card" style="margin-bottom: 22px;">
                    <div style="display: flex; align-items: center; margin-bottom: 12px;">
                        <div style="width: 36px; height: 36px; border-radius: 50%; background: var(--green-dark); color: white; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 500; margin-right: 10px;">
                            ${post.avatar}
                        </div>
                        <div>
                            <div style="font-size: 14px; font-weight: 500; color: #2d3748;">${post.author}</div>
                            <div style="font-size: 11px; color: #718096;">${post.time}</div>
                        </div>
                    </div>
                    <div style="font-size: 14px; color: #2d3748; line-height: 1.5; margin-bottom: 12px;">
                        ${post.content}
                    </div>
                    ${post.images.length > 0 ? `
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 12px;">
                            ${post.images.map(img => `<div style="width: 100%; height: 100px; background: #f7fafc; border-radius: 6px; display: flex; align-items: center; justify-content: center; color: #a0aec0; font-size: 12px;">å›¾ç‰‡</div>`).join('')}
                        </div>
                    ` : ''}
                    <div style="display: flex; justify-content: space-between; align-items: center; padding-top: 8px; border-top: 1px solid #f0f0f0;">
                        <div style="display: flex; gap: 16px;">
                            <span style="font-size: 12px; color: #718096; cursor: pointer;">ç‚¹èµ ${post.likes}</span>
                            <span style="font-size: 12px; color: #718096; cursor: pointer;">è¯„è®º ${post.comments}</span>
                        </div>
                        <span style="font-size: 12px; color: #718096; cursor: pointer;">åˆ†äº«</span>
                    </div>
                </div>
            `).join('');
            
            container.innerHTML = html;
        }
        
        // æ˜¾ç¤ºå‘å¸ƒæ¨¡æ€æ¡†
        function showPublishModal() {
            const modal = document.getElementById('publish-modal');
            if (modal) {
                modal.classList.add('active');
            } else {
                // å¦‚æœæ¨¡æ€æ¡†ä¸å­˜åœ¨ï¼Œåˆ›å»ºä¸€ä¸ªç®€å•çš„é€‰æ‹©
                const choice = confirm('é€‰æ‹©å‘å¸ƒå†…å®¹ç±»å‹ï¼š\n\nç¡®å®š = å‘å¸ƒæ´»åŠ¨\nå–æ¶ˆ = å‘å¸ƒå›¾æ–‡');
                if (choice) {
                    // å‘å¸ƒæ´»åŠ¨
                    showFeedback();
                } else {
                    // å‘å¸ƒå›¾æ–‡
                    alert('å‘å¸ƒå›¾æ–‡åŠŸèƒ½å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼');
                }
            }
        }
        
        // æ˜¾ç¤ºåé¦ˆ
        function showFeedback() {
            alert('åŠŸèƒ½å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…');
        }
        
        // é€€å‡ºç™»å½•
        function logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                currentUser = null;
                document.querySelectorAll('.page').forEach(page => {
                    page.classList.remove('active');
                });
                document.getElementById('login-page').classList.add('active');
                
                // éšè—åº•éƒ¨å¯¼èˆªæ 
                document.querySelector('.app-container').classList.add('hide-nav');
            }
        }
        
        // é¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('=== é¡µé¢åˆå§‹åŒ–å¼€å§‹ ===');
            
            // ç™»å½•é¡µé»˜è®¤éšè—åº•éƒ¨å¯¼èˆª
            const appContainer = document.querySelector('.app-container');
            if (appContainer) {
                appContainer.classList.add('hide-nav');
                console.log('å·²éšè—åº•éƒ¨å¯¼èˆª');
            } else {
                console.error('æ‰¾ä¸åˆ°.app-containerå…ƒç´ ');
            }
            
            // æ£€æŸ¥åº•éƒ¨å¯¼èˆªæ 
            const bottomNav = document.querySelector('.bottom-nav');
            if (bottomNav) {
                console.log('æ‰¾åˆ°åº•éƒ¨å¯¼èˆªæ ');
                const navItems = bottomNav.querySelectorAll('.nav-item');
                console.log('æ‰¾åˆ°', navItems.length, 'ä¸ªå¯¼èˆªé¡¹');
                const publishBtnNav = bottomNav.querySelector('.publish-btn-nav');
                if (publishBtnNav) {
                    console.log('æ‰¾åˆ°å¯¼èˆªæ å‘å¸ƒæŒ‰é’®');
                }
            } else {
                console.error('æ‰¾ä¸åˆ°åº•éƒ¨å¯¼èˆªæ ');
            }
            
            // è‡ªåŠ¨ç™»å½•ï¼Œç›´æ¥è¿›å…¥ç¤¾å›¢ä¸»é¡µ
            setTimeout(() => {
                console.log('=== æ‰§è¡Œè‡ªåŠ¨ç™»å½• ===');
                loginWithWeChat();
            }, 1000);
        });
    </script>
</body>
</html>